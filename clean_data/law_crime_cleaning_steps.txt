###########################################################################
### Law Enforcement Employment and Crime by Agency Cleaning and Merging ###
###########################################################################

# Documented by William Wetzel


####################
### General Info ###
####################

Manual cleaning steps are detailed in “Cleaning Steps”

All other cleaning procedures were completed in: 

python 3.6.1 
pandas 0.20.1
numpy 1.12.1 


Scripts can be run in R with rPython.  You will still need to open the python file to select which function you are going to run, and specify file locations on your machine if needed.

######################
### Cleaning Steps ###
######################

***All functions referenced for data cleaning can be found in “law_enforcement_data_cleaning.py”***

1. Data was scraped from the “Law Enforcement Employment in Nebraska Series” for the years 2016 through 2007 - (https://ncc.nebraska.gov/stat-reports#Crime_in_Nebraska_Series)

    Only one table from each pdf was scraped, it was decided the statistics for “Cities Above 5,000 Population” would be the most relevant to our research.  An example of this table is found on page 4 of the 2016 employment data.

    Tabula was used to convert each pdf table into a csv, which were then manually combined into a single cvs using excel.

Data Checkpoint: raw_combined_data_law_enforcement_2007-2017.csv


2. To complete our analysis, it was necessary to include the county in which each department is located.  A new column for county was added in the combined dataset using excel, for the year 2007, counties were researched and input by hand for each department.  

3. It was discovered during this time, department names had different formats for each dataset year.  For example, in 2007 department would “Omaha P.D” and in 2014 it would be “OMAHA PD”.  To standardize department names, names were manually replaced in excel by using the 2007 department naming convention for all years.

Data Checkpoint: law_enforcement_2007-2017_department_names_matching.csv


4. Now that all department names for each year matched, the function “law_enforcement_county_copier” was used to copy department counties to all departments.

Data Checkpoint: “law_enforcement_2007-2017_counties.csv”


5. The function “period_remover” was used to turn department names from “… P.D.” to “… PD”

Data Checkpoint: law_enforcement_2007-2017_pd.csv


6. The function “department_merger” was used to first identify departments from “law_enforcement_2007-2017_counties.csv” which did not have crime statistics in "All_Crimes_by_Year_and_Agency.csv”, data cleaning steps were included to rectify 2 missing names.

The crime data was merged by agency or department with the law_enforcement_employment data.

Final Cleaned Data: lawStaff_vs_Crime.csv